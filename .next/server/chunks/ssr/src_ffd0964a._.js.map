{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Health/Desktop/Rhulani%20Tuck%20Shop/src/components/page-header.tsx"],"sourcesContent":["import type { FC, ReactNode } from 'react';\n\ntype PageHeaderProps = {\n  title: string;\n  children?: ReactNode;\n};\n\nconst PageHeader: FC<PageHeaderProps> = ({ title, children }) => {\n  return (\n    <div className=\"flex items-center justify-between mb-6 gap-4\">\n      <h1 className=\"text-3xl font-bold tracking-tight text-gray-900 dark:text-gray-100 flex-shrink-0\">{title}</h1>\n      <div className=\"flex items-center space-x-4 w-full justify-end\">\n        {children}\n      </div>\n    </div>\n  );\n};\n\nexport default PageHeader;\n"],"names":[],"mappings":";;;;;;AAOA,MAAM,aAAkC,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE;IAC1D,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAoF;;;;;;0BAClG,8OAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;;AAIT;uCAEe","debugId":null}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Health/Desktop/Rhulani%20Tuck%20Shop/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Health/Desktop/Rhulani%20Tuck%20Shop/src/components/pos/product-card.tsx"],"sourcesContent":["import Image from 'next/image';\nimport { Card, CardContent, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport type { Product } from '@/lib/types';\nimport { PlusCircle } from 'lucide-react';\n\ninterface ProductCardProps {\n  product: Product;\n  onAddToCart: (product: Product) => void;\n}\n\nexport function ProductCard({ product, onAddToCart }: ProductCardProps) {\n  return (\n    <Card className=\"flex flex-col\">\n      <CardHeader className=\"p-0\">\n        <Image\n          src={product.imageUrl}\n          alt={product.name}\n          width={400}\n          height={250}\n          className=\"aspect-video w-full object-cover rounded-t-lg\"\n          data-ai-hint={product.imageHint}\n        />\n      </CardHeader>\n      <CardContent className=\"p-4 flex-grow\">\n        <CardTitle className=\"text-lg font-semibold mb-1\">{product.name}</CardTitle>\n        <p className=\"text-sm text-muted-foreground\">{product.category}</p>\n      </CardContent>\n      <CardFooter className=\"p-4 flex justify-between items-center\">\n        <p className=\"text-lg font-bold\">R{product.price.toFixed(2)}</p>\n        <Button size=\"sm\" onClick={() => onAddToCart(product)}>\n          <PlusCircle className=\"mr-2 h-4 w-4\" />\n          Add\n        </Button>\n      </CardFooter>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAOO,SAAS,YAAY,EAAE,OAAO,EAAE,WAAW,EAAoB;IACpE,qBACE,8OAAC,wIAAI;QAAC,WAAU;;0BACd,8OAAC,8IAAU;gBAAC,WAAU;0BACpB,cAAA,8OAAC,wIAAK;oBACJ,KAAK,QAAQ,QAAQ;oBACrB,KAAK,QAAQ,IAAI;oBACjB,OAAO;oBACP,QAAQ;oBACR,WAAU;oBACV,gBAAc,QAAQ,SAAS;;;;;;;;;;;0BAGnC,8OAAC,+IAAW;gBAAC,WAAU;;kCACrB,8OAAC,6IAAS;wBAAC,WAAU;kCAA8B,QAAQ,IAAI;;;;;;kCAC/D,8OAAC;wBAAE,WAAU;kCAAiC,QAAQ,QAAQ;;;;;;;;;;;;0BAEhE,8OAAC,8IAAU;gBAAC,WAAU;;kCACpB,8OAAC;wBAAE,WAAU;;4BAAoB;4BAAE,QAAQ,KAAK,CAAC,OAAO,CAAC;;;;;;;kCACzD,8OAAC,4IAAM;wBAAC,MAAK;wBAAK,SAAS,IAAM,YAAY;;0CAC3C,8OAAC,gOAAU;gCAAC,WAAU;;;;;;4BAAiB;;;;;;;;;;;;;;;;;;;AAMjD","debugId":null}},
    {"offset": {"line": 238, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Health/Desktop/Rhulani%20Tuck%20Shop/src/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,0BAAY,mNAAgB,CAIhC,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,8OAAC,6KAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,IAAA,yHAAE,EACX,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;AAIf,UAAU,WAAW,GAAG,6KAAuB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 268, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Health/Desktop/Rhulani%20Tuck%20Shop/src/components/ui/radio-group.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,8OAAC,kLAAwB;QACvB,WAAW,IAAA,yHAAE,EAAC,cAAc;QAC3B,GAAG,KAAK;QACT,KAAK;;;;;;AAGX;AACA,WAAW,WAAW,GAAG,kLAAwB,CAAC,WAAW;AAE7D,MAAM,+BAAiB,mNAAgB,CAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,8OAAC,kLAAwB;QACvB,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,4OACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,uLAA6B;YAAC,WAAU;sBACvC,cAAA,8OAAC,gNAAM;gBAAC,WAAU;;;;;;;;;;;;;;;;AAI1B;AACA,eAAe,WAAW,GAAG,kLAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 328, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Health/Desktop/Rhulani%20Tuck%20Shop/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,IAAA,uKAAG,EACvB;AAGF,MAAM,sBAAQ,mNAAgB,CAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,yKAAmB;QAClB,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,yKAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 359, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Health/Desktop/Rhulani%20Tuck%20Shop/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,mNAAgB,CAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,IAAA,yHAAE,EACX,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 387, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Health/Desktop/Rhulani%20Tuck%20Shop/src/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,kLAAwB;QACvB,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;0BAET,8OAAC,sLAA4B;gBAAC,WAAU;0BACrC;;;;;;0BAEH,8OAAC;;;;;0BACD,8OAAC,oLAA0B;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,kLAAwB,CAAC,WAAW;AAE7D,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO,EAAE,oBACpD,8OAAC,iMAAuC;QACtC,KAAK;QACL,aAAa;QACb,WAAW,IAAA,yHAAE,EACX,iDACA,gBAAgB,cACd,sDACF,gBAAgB,gBACd,wDACF;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,6LAAmC;YAAC,WAAU;;;;;;;;;;;AAGnD,UAAU,WAAW,GAAG,iMAAuC,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 455, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Health/Desktop/Rhulani%20Tuck%20Shop/src/components/pos/pos-cart.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle, CardFooter } from '@/components/ui/card';\nimport { Separator } from '@/components/ui/separator';\nimport type { CartItem, Sale } from '@/lib/types';\nimport { X, Plus, Minus, Percent } from 'lucide-react';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { ReceiptData } from './receipt';\n\ninterface PosCartProps {\n  items: CartItem[];\n  onUpdateQuantity: (productId: string, quantity: number) => void;\n  onRemoveItem: (productId: string) => void;\n  onCheckout: (saleDetails: Omit<ReceiptData, 'saleId' | 'date'>) => void;\n}\n\nexport function PosCart({ items, onUpdateQuantity, onRemoveItem, onCheckout }: PosCartProps) {\n  const [paymentMethod, setPaymentMethod] = useState<Sale['paymentMethod']>('Cash');\n  const [taxPercentage, setTaxPercentage] = useState<number>(0);\n  const [amountPaid, setAmountPaid] = useState<number>(0);\n  const [isClient, setIsClient] = useState(false);\n\n  useEffect(() => {\n    setIsClient(true);\n  }, []);\n\n  const subtotal = items.reduce((acc, item) => acc + item.product.price * item.quantity, 0);\n  const taxAmount = subtotal * (taxPercentage / 100);\n  const total = subtotal + taxAmount;\n  const change = amountPaid > total ? amountPaid - total : 0;\n\n  const handleCheckout = () => {\n    onCheckout({\n      items,\n      subtotal,\n      taxAmount,\n      total,\n      amountPaid,\n      change,\n      paymentMethod,\n    });\n    setAmountPaid(0);\n  }\n\n  const handleAmountPaidChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = parseFloat(e.target.value);\n    setAmountPaid(isNaN(value) ? 0 : value);\n  };\n  \n  const handleTaxChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = parseFloat(e.target.value);\n    setTaxPercentage(isNaN(value) ? 0 : value);\n  };\n  \n  const isCheckoutDisabled = () => {\n    if (items.length === 0) return true;\n    if (paymentMethod === 'Cash') {\n      return amountPaid < total;\n    }\n    return false;\n  };\n  \n  // After checkout, items will be empty, resetting the view\n  useEffect(() => {\n    if (items.length === 0) {\n      setAmountPaid(0);\n      // Tax percentage persists\n    }\n  }, [items]);\n\n  if (!isClient) {\n    return null; // or a loading skeleton\n  }\n\n  return (\n    <Card className=\"flex flex-col h-full\">\n      <CardHeader>\n        <CardTitle>Cart</CardTitle>\n      </CardHeader>\n      <CardContent className=\"flex-1 flex flex-col overflow-hidden p-0\">\n        <ScrollArea className=\"h-full\">\n            {items.length === 0 ? (\n              <div className=\"flex items-center justify-center h-full px-6\">\n                <p className=\"text-muted-foreground\">Your cart is empty</p>\n              </div>\n            ) : (\n              <div className=\"space-y-4 px-6\">\n                <div className=\"grid grid-cols-[2fr_1fr_1fr_auto] gap-4 pb-2 border-b\">\n                    <p className=\"text-sm font-medium text-muted-foreground\">Product</p>\n                    <p className=\"text-sm font-medium text-muted-foreground text-center\">Qty</p>\n                    <p className=\"text-sm font-medium text-muted-foreground text-right\">Price</p>\n                    <div className=\"w-8\"></div>\n                  </div>\n                {items.map((item) => (\n                  <div key={item.product.id} className=\"grid grid-cols-[2fr_1fr_1fr_auto] items-center gap-4\">\n                    <div className=\"pr-2\">\n                        <p className=\"font-medium text-sm truncate\">{item.product.name}</p>\n                    </div>\n\n                    <div className=\"flex items-center gap-1 justify-center\">\n                        <Button\n                            variant=\"outline\"\n                            size=\"icon\"\n                            className=\"h-6 w-6\"\n                            onClick={() => onUpdateQuantity(item.product.id, Math.max(1, item.quantity - 1))}\n                        >\n                            <Minus className=\"h-3 w-3\" />\n                        </Button>\n                        <span className=\"w-5 text-center text-sm\">{item.quantity}</span>\n                        <Button\n                            variant=\"outline\"\n                            size=\"icon\"\n                            className=\"h-6 w-6\"\n                            onClick={() => onUpdateQuantity(item.product.id, item.quantity + 1)}\n                        >\n                            <Plus className=\"h-3 w-3\" />\n                        </Button>\n                    </div>\n                    <p className=\"text-sm font-medium text-right\">\n                        R{(item.product.price * item.quantity).toFixed(2)}\n                    </p>\n                    <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\" onClick={() => onRemoveItem(item.product.id)}>\n                        <X className=\"h-4 w-4 text-destructive\" />\n                    </Button>\n                  </div>\n                ))}\n              </div>\n            )}\n        </ScrollArea>\n      </CardContent>\n      <CardFooter className=\"flex-col !p-6 border-t\">\n        <div className=\"w-full space-y-4 text-sm\">\n          <div className=\"flex justify-between\">\n            <span>Subtotal</span>\n            <span>R{subtotal.toFixed(2)}</span>\n          </div>\n          <div className=\"flex justify-between items-center\">\n            <Label htmlFor=\"tax-percentage\">Tax (%)</Label>\n            <div className=\"relative\">\n              <Input \n                id=\"tax-percentage\"\n                type=\"number\"\n                value={taxPercentage === 0 ? '' : taxPercentage}\n                onChange={handleTaxChange}\n                className=\"w-24 h-8 pl-3 pr-6 text-right\"\n                placeholder=\"0\"\n              />\n              <Percent className=\"absolute right-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n            </div>\n          </div>\n          <div className=\"flex justify-between text-muted-foreground\">\n            <span>Tax Amount</span>\n            <span>R{taxAmount.toFixed(2)}</span>\n          </div>\n          <Separator className=\"my-2\"/>\n          <RadioGroup defaultValue=\"Cash\" value={paymentMethod} onValueChange={(value: Sale['paymentMethod']) => setPaymentMethod(value)} className=\"flex space-x-4\">\n            <div className=\"flex items-center space-x-2\">\n              <RadioGroupItem value=\"Cash\" id=\"cash\" />\n              <Label htmlFor=\"cash\">Cash</Label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <RadioGroupItem value=\"Card\" id=\"card\" />\n              <Label htmlFor=\"card\">Card</Label>\n            </div>\n          </RadioGroup>\n          <Separator className=\"my-2\"/>\n          <div className=\"flex justify-between font-bold text-lg\">\n            <span>Total</span>\n            <span>R{total.toFixed(2)}</span>\n          </div>\n           {paymentMethod === 'Cash' && (\n            <>\n              <div className=\"flex justify-between items-center\">\n                <Label htmlFor=\"amount-paid\">Amount Paid</Label>\n                <Input\n                  id=\"amount-paid\"\n                  type=\"number\"\n                  value={amountPaid === 0 ? '' : amountPaid}\n                  onChange={handleAmountPaidChange}\n                  className=\"w-24 h-8 text-right\"\n                  placeholder=\"0.00\"\n                />\n              </div>\n              <div className=\"flex justify-between text-muted-foreground\">\n                <span>Change</span>\n                <span>R{change.toFixed(2)}</span>\n              </div>\n            </>\n           )}\n        </div>\n        <Button className=\"w-full mt-4\" disabled={isCheckoutDisabled()} onClick={handleCheckout}>\n          Checkout\n        </Button>\n      </CardFooter>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1027, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Health/Desktop/Rhulani%20Tuck%20Shop/src/components/pos/receipt.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\nimport Barcode from 'react-barcode';\nimport { format } from 'date-fns';\nimport type { CartItem, Sale } from '@/lib/types';\nimport { Separator } from '@/components/ui/separator';\n\nexport interface ReceiptData {\n  saleId: string;\n  date: Date;\n  items: CartItem[];\n  subtotal: number;\n  taxAmount: number;\n  total: number;\n  paymentMethod: Sale['paymentMethod'];\n  amountPaid: number;\n  change: number;\n}\n\ninterface ReceiptProps {\n  receiptData: ReceiptData;\n}\n\nexport const Receipt = React.forwardRef<HTMLDivElement, ReceiptProps>(\n  ({ receiptData }, ref) => {\n    const {\n      saleId,\n      date,\n      items,\n      subtotal,\n      taxAmount,\n      total,\n      paymentMethod,\n      amountPaid,\n      change,\n    } = receiptData;\n\n    return (\n      <div ref={ref} className=\"p-4 bg-white text-black font-mono text-xs w-[300px] mx-auto print-receipt-container\">\n        <div className=\"text-center mb-4\">\n          <h1 className=\"text-lg font-bold\">RHULANI TUCK SHOP</h1>\n          <p>123 Main Street, Anytown</p>\n          <p>Tel: (123) 456-7890</p>\n        </div>\n\n        <Separator className=\"my-2 bg-black\" />\n\n        <div className=\"flex justify-between mb-2\">\n          <span>Date: {format(date, 'yyyy-MM-dd')}</span>\n          <span>Time: {format(date, 'HH:mm:ss')}</span>\n        </div>\n        <p className=\"mb-2\">Receipt No: {saleId}</p>\n\n        <Separator className=\"my-2 bg-black\" />\n        \n        <table className=\"w-full\">\n            <thead>\n                <tr>\n                    <th className=\"text-left\">ITEM</th>\n                    <th className=\"text-center\">QTY</th>\n                    <th className=\"text-right\">PRICE</th>\n                </tr>\n            </thead>\n            <tbody>\n            {items.map(item => (\n                <tr key={item.product.id}>\n                    <td className=\"text-left w-1/2 break-words\">{item.product.name}</td>\n                    <td className=\"text-center align-top\">{item.quantity}</td>\n                    <td className=\"text-right align-top\">R{item.product.price.toFixed(2)}</td>\n                </tr>\n            ))}\n            </tbody>\n        </table>\n\n        <Separator className=\"my-2 border-dashed bg-transparent border-t border-black\" />\n\n        <div className=\"space-y-1\">\n            <div className=\"flex justify-between\">\n                <span>Subtotal:</span>\n                <span>R{subtotal.toFixed(2)}</span>\n            </div>\n            <div className=\"flex justify-between\">\n                <span>Tax:</span>\n                <span>R{taxAmount.toFixed(2)}</span>\n            </div>\n            <div className=\"flex justify-between font-bold text-sm\">\n                <span>Total:</span>\n                <span>R{total.toFixed(2)}</span>\n            </div>\n        </div>\n\n        <Separator className=\"my-2 border-dashed bg-transparent border-t border-black\" />\n        \n        <div className=\"space-y-1\">\n            <div className=\"flex justify-between\">\n                <span>Payment Method:</span>\n                <span>{paymentMethod}</span>\n            </div>\n             {paymentMethod === 'Cash' && (\n                <>\n                    <div className=\"flex justify-between\">\n                        <span>Amount Paid:</span>\n                        <span>R{amountPaid.toFixed(2)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                        <span>Change:</span>\n                        <span>R{change.toFixed(2)}</span>\n                    </div>\n                </>\n             )}\n        </div>\n\n        <Separator className=\"my-2 bg-black\" />\n\n        <div className=\"mt-4 text-center\">\n          <h2 className=\"font-bold uppercase\">Return Policy</h2>\n          <div className=\"text-left space-y-1 mt-1\">\n            <p>- Returns accepted within 1 day of purchase.</p>\n            <p>- Valid receipt required for all returns.</p>\n            <p>- Items must be in original, unused condition.</p>\n            <p>- Refunds issued to original payment method.</p>\n            <p>- Perishables or final sale items not returnable.</p>\n            <p>- No returns on voided transactions.</p>\n          </div>\n        </div>\n        \n        <div className=\"text-center mt-6\">\n          <p>Thank you for your purchase!</p>\n        </div>\n\n        <div className=\"flex justify-center mt-4\">\n            <Barcode value={saleId} height={40} width={1.5} displayValue={false} />\n        </div>\n      </div>\n    );\n  }\n);\n\nReceipt.displayName = 'Receipt';\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAEA;AALA;;;;;;AAuBO,MAAM,wBAAU,gNAAK,CAAC,UAAU,CACrC,CAAC,EAAE,WAAW,EAAE,EAAE;IAChB,MAAM,EACJ,MAAM,EACN,IAAI,EACJ,KAAK,EACL,QAAQ,EACR,SAAS,EACT,KAAK,EACL,aAAa,EACb,UAAU,EACV,MAAM,EACP,GAAG;IAEJ,qBACE,8OAAC;QAAI,KAAK;QAAK,WAAU;;0BACvB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAoB;;;;;;kCAClC,8OAAC;kCAAE;;;;;;kCACH,8OAAC;kCAAE;;;;;;;;;;;;0BAGL,8OAAC,kJAAS;gBAAC,WAAU;;;;;;0BAErB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;4BAAK;4BAAO,IAAA,gKAAM,EAAC,MAAM;;;;;;;kCAC1B,8OAAC;;4BAAK;4BAAO,IAAA,gKAAM,EAAC,MAAM;;;;;;;;;;;;;0BAE5B,8OAAC;gBAAE,WAAU;;oBAAO;oBAAa;;;;;;;0BAEjC,8OAAC,kJAAS;gBAAC,WAAU;;;;;;0BAErB,8OAAC;gBAAM,WAAU;;kCACb,8OAAC;kCACG,cAAA,8OAAC;;8CACG,8OAAC;oCAAG,WAAU;8CAAY;;;;;;8CAC1B,8OAAC;oCAAG,WAAU;8CAAc;;;;;;8CAC5B,8OAAC;oCAAG,WAAU;8CAAa;;;;;;;;;;;;;;;;;kCAGnC,8OAAC;kCACA,MAAM,GAAG,CAAC,CAAA,qBACP,8OAAC;;kDACG,8OAAC;wCAAG,WAAU;kDAA+B,KAAK,OAAO,CAAC,IAAI;;;;;;kDAC9D,8OAAC;wCAAG,WAAU;kDAAyB,KAAK,QAAQ;;;;;;kDACpD,8OAAC;wCAAG,WAAU;;4CAAuB;4CAAE,KAAK,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC;;;;;;;;+BAH7D,KAAK,OAAO,CAAC,EAAE;;;;;;;;;;;;;;;;0BAShC,8OAAC,kJAAS;gBAAC,WAAU;;;;;;0BAErB,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;0CAAK;;;;;;0CACN,8OAAC;;oCAAK;oCAAE,SAAS,OAAO,CAAC;;;;;;;;;;;;;kCAE7B,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;0CAAK;;;;;;0CACN,8OAAC;;oCAAK;oCAAE,UAAU,OAAO,CAAC;;;;;;;;;;;;;kCAE9B,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;0CAAK;;;;;;0CACN,8OAAC;;oCAAK;oCAAE,MAAM,OAAO,CAAC;;;;;;;;;;;;;;;;;;;0BAI9B,8OAAC,kJAAS;gBAAC,WAAU;;;;;;0BAErB,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;0CAAK;;;;;;0CACN,8OAAC;0CAAM;;;;;;;;;;;;oBAET,kBAAkB,wBAChB;;0CACI,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;kDAAK;;;;;;kDACN,8OAAC;;4CAAK;4CAAE,WAAW,OAAO,CAAC;;;;;;;;;;;;;0CAE/B,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;kDAAK;;;;;;kDACN,8OAAC;;4CAAK;4CAAE,OAAO,OAAO,CAAC;;;;;;;;;;;;;;;;;;;;;0BAMvC,8OAAC,kJAAS;gBAAC,WAAU;;;;;;0BAErB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAsB;;;;;;kCACpC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;0CAAE;;;;;;0CACH,8OAAC;0CAAE;;;;;;0CACH,8OAAC;0CAAE;;;;;;0CACH,8OAAC;0CAAE;;;;;;0CACH,8OAAC;0CAAE;;;;;;0CACH,8OAAC;0CAAE;;;;;;;;;;;;;;;;;;0BAIP,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;8BAAE;;;;;;;;;;;0BAGL,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC,sKAAO;oBAAC,OAAO;oBAAQ,QAAQ;oBAAI,OAAO;oBAAK,cAAc;;;;;;;;;;;;;;;;;AAIxE;AAGF,QAAQ,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 1528, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Health/Desktop/Rhulani%20Tuck%20Shop/src/app/%28dashboard%29/pos/page.tsx"],"sourcesContent":["\n'use client';\n\nimport { useState, useRef, useEffect, useCallback, useMemo } from 'react';\nimport PageHeader from '@/components/page-header';\nimport { ProductCard } from '@/components/pos/product-card';\nimport { PosCart } from '@/components/pos/pos-cart';\nimport type { Product, CartItem, Sale } from '@/lib/types';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { Input } from '@/components/ui/input';\nimport { Barcode, Loader2 } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { Receipt, type ReceiptData } from '@/components/pos/receipt';\nimport { useCollection, useMemoFirebase, useUser } from '@/firebase';\nimport { collection, writeBatch, doc } from 'firebase/firestore';\nimport { useFirestore } from '@/firebase';\nimport { errorEmitter } from '@/firebase/error-emitter';\nimport { FirestorePermissionError } from '@/firebase/errors';\n\n\nexport default function PosPage() {\n  const firestore = useFirestore();\n  const { user } = useUser();\n  \n  const productsQuery = useMemoFirebase(() => {\n    if (!firestore || !user) return null;\n    return collection(firestore, 'products');\n  }, [firestore, user], 'products');\n\n  const { data: products, isLoading: productsLoading } = useCollection<Product>(productsQuery);\n\n  const [cart, setCart] = useState<CartItem[]>([]);\n  const [lastSale, setLastSale] = useState<ReceiptData | null>(null);\n  const receiptRef = useRef<HTMLDivElement>(null);\n  const { toast } = useToast();\n\n  const handleAddToCart = (product: Product, quantity = 1) => {\n    if (product.stock < quantity) {\n        toast({\n            variant: \"destructive\",\n            title: \"Out of Stock\",\n            description: `Not enough stock for ${product.name}. Only ${product.stock} available.`,\n        });\n        return;\n    }\n    setCart((prevCart) => {\n      const existingItem = prevCart.find((item) => item.product.id === product.id);\n      if (existingItem) {\n         if ((existingItem.quantity + quantity) <= product.stock) {\n            return prevCart.map((item) =>\n              item.product.id === product.id ? { ...item, quantity: item.quantity + quantity } : item\n            );\n         } else {\n            toast({\n                variant: \"destructive\",\n                title: \"Stock Limit Reached\",\n                description: `You cannot add more of ${product.name}. Only ${product.stock} total available.`,\n            });\n            return prevCart;\n         }\n      }\n      return [...prevCart, { product, quantity: quantity }];\n    });\n  };\n  \n  const handleUpdateQuantity = (productId: string, quantity: number) => {\n    setCart((prevCart) =>\n      prevCart.map((item) =>\n        item.product.id === productId ? { ...item, quantity: quantity } : item\n      )\n    );\n  };\n  \n  const handleRemoveItem = (productId: string) => {\n    setCart((prevCart) => prevCart.filter((item) => item.product.id !== productId));\n  };\n  \n  const handleBarcodeScan = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.key === 'Enter') {\n      const barcode = event.currentTarget.value;\n      if (!products) return;\n\n      let productFound: Product | undefined;\n      let quantityToAdd = 1;\n\n      for (const p of products) {\n        if (p.barcodeEach && p.barcodeEach === barcode) {\n          productFound = p;\n          quantityToAdd = 1;\n          break;\n        }\n        if (p.barcodePack && p.barcodePack === barcode) {\n          productFound = p;\n          quantityToAdd = p.packSize;\n          break;\n        }\n        if (p.barcodeCase && p.barcodeCase === barcode) {\n          productFound = p;\n          quantityToAdd = p.caseSize;\n          break;\n        }\n      }\n\n      if (productFound) {\n        handleAddToCart(productFound, quantityToAdd);\n        toast({\n            title: \"Product Added\",\n            description: `${productFound.name} (x${quantityToAdd}) has been added to the cart.`,\n        })\n      } else {\n        toast({\n            variant: \"destructive\",\n            title: \"Product Not Found\",\n            description: `No product found with barcode: ${barcode}`,\n        })\n      }\n      event.currentTarget.value = '';\n    }\n  };\n\n  const finishCheckout = useCallback(() => {\n    setCart([]);\n    setLastSale(null);\n    toast({\n        title: \"Checkout Successful\",\n        description: \"The sale has been recorded.\",\n    });\n  }, [toast]);\n\n\n  const handleCheckout = async (saleDetails: Omit<ReceiptData, 'saleId' | 'date'>) => {\n    if (cart.length === 0 || !firestore || !user) return;\n\n    const batch = writeBatch(firestore);\n\n    // Update stock levels\n    cart.forEach(cartItem => {\n      const productRef = doc(firestore, 'products', cartItem.product.id);\n      const newStock = cartItem.product.stock - cartItem.quantity;\n      batch.update(productRef, { stock: newStock });\n    });\n\n    const saleId = `sale-${Date.now()}`;\n    const saleDate = new Date();\n\n    const newSale: Omit<Sale, 'id'> = {\n      date: saleDate.toISOString(),\n      total: saleDetails.total,\n      customerName: 'Walk-in Customer',\n      items: cart.map(item => ({\n        productId: item.product.id,\n        productName: item.product.name,\n        quantity: item.quantity,\n        price: item.product.price\n      })),\n      paymentMethod: saleDetails.paymentMethod,\n      status: 'completed',\n      salespersonId: user.uid,\n      salespersonName: user.displayName || user.email || 'Unknown',\n      amountPaid: saleDetails.amountPaid,\n      change: saleDetails.change\n    };\n\n    const saleRef = doc(collection(firestore, 'sales'));\n    batch.set(saleRef, newSale);\n\n    try {\n        await batch.commit();\n        setLastSale({\n            ...saleDetails,\n            saleId: saleRef.id,\n            date: saleDate,\n        });\n    } catch(e) {\n        console.error(\"Checkout failed:\", e);\n        const permissionError = new FirestorePermissionError({\n            path: 'batch-write',\n            operation: 'create',\n        });\n        errorEmitter.emit('permission-error', permissionError);\n        toast({\n            variant: \"destructive\",\n            title: \"Checkout Failed\",\n            description: \"There was an error processing the sale. Please check permissions and try again.\",\n        });\n    }\n  };\n\n  useEffect(() => {\n    if (!lastSale) return;\n\n    const handleAfterPrint = () => {\n      try {\n        finishCheckout();\n      } finally {\n        window.removeEventListener('afterprint', handleAfterPrint);\n      }\n    };\n\n    // Listen for the afterprint event so we only clear state after printing completes.\n    window.addEventListener('afterprint', handleAfterPrint);\n\n    // Trigger print. On some browsers `afterprint` may not fire reliably, so use a fallback timeout.\n    window.print();\n    const fallback = setTimeout(() => {\n      // If afterprint didn't fire, ensure we still clear state.\n      try {\n        finishCheckout();\n      } catch (e) {\n        // ignore\n      }\n      window.removeEventListener('afterprint', handleAfterPrint);\n    }, 2000);\n\n    return () => {\n      clearTimeout(fallback);\n      window.removeEventListener('afterprint', handleAfterPrint);\n    };\n  }, [lastSale, finishCheckout]);\n\n\n  return (\n    <>\n      <div className=\"flex flex-col h-[calc(100vh-theme(spacing.24))]\">\n        <PageHeader title=\"Point of Sale\">\n          <div className=\"relative w-full max-w-sm items-center\">\n              <Input\n                type=\"text\"\n                placeholder=\"Scan or enter barcode...\"\n                onKeyDown={handleBarcodeScan}\n                className=\"pl-10\"\n              />\n              <span className=\"absolute inset-y-0 left-0 flex items-center justify-center pl-3\">\n                <Barcode className=\"h-5 w-5 text-muted-foreground\" />\n              </span>\n            </div>\n        </PageHeader>\n        <div className=\"grid md:grid-cols-[2fr_1fr] gap-8 flex-1 overflow-hidden\">\n          <ScrollArea className=\"h-full pr-4\">\n            {productsLoading && (\n                <div className=\"flex items-center justify-center h-full\">\n                    <Loader2 className=\"h-12 w-12 animate-spin text-primary\" />\n                </div>\n            )}\n            {!productsLoading && products && (\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n                {products.map((product) => (\n                  <ProductCard key={product.id} product={product} onAddToCart={() => handleAddToCart(product, 1)} />\n                ))}\n              </div>\n            )}\n          </ScrollArea>\n          <div className=\"hidden md:block h-full overflow-y-auto\">\n            <PosCart \n              items={cart} \n              onUpdateQuantity={handleUpdateQuantity} \n              onRemoveItem={handleRemoveItem} \n              onCheckout={handleCheckout} \n            />\n          </div>\n        </div>\n      </div>\n      {lastSale && (\n        <div className=\"hidden print:block print-receipt-container\">\n          <Receipt ref={receiptRef} receiptData={lastSale} />\n        </div>\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAhBA;;;;;;;;;;;;;;;;AAmBe,SAAS;IACtB,MAAM,YAAY,IAAA,4IAAY;IAC9B,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,kJAAO;IAExB,MAAM,gBAAgB,IAAA,uJAAe,EAAC;QACpC,IAAI,CAAC,aAAa,CAAC,MAAM,OAAO;QAChC,OAAO,IAAA,+KAAU,EAAC,WAAW;IAC/B,GAAG;QAAC;QAAW;KAAK,EAAE;IAEtB,MAAM,EAAE,MAAM,QAAQ,EAAE,WAAW,eAAe,EAAE,GAAG,IAAA,mKAAa,EAAU;IAE9E,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAa,EAAE;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAqB;IAC7D,MAAM,aAAa,IAAA,+MAAM,EAAiB;IAC1C,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,wIAAQ;IAE1B,MAAM,kBAAkB,CAAC,SAAkB,WAAW,CAAC;QACrD,IAAI,QAAQ,KAAK,GAAG,UAAU;YAC1B,MAAM;gBACF,SAAS;gBACT,OAAO;gBACP,aAAa,CAAC,qBAAqB,EAAE,QAAQ,IAAI,CAAC,OAAO,EAAE,QAAQ,KAAK,CAAC,WAAW,CAAC;YACzF;YACA;QACJ;QACA,QAAQ,CAAC;YACP,MAAM,eAAe,SAAS,IAAI,CAAC,CAAC,OAAS,KAAK,OAAO,CAAC,EAAE,KAAK,QAAQ,EAAE;YAC3E,IAAI,cAAc;gBACf,IAAI,AAAC,aAAa,QAAQ,GAAG,YAAa,QAAQ,KAAK,EAAE;oBACtD,OAAO,SAAS,GAAG,CAAC,CAAC,OACnB,KAAK,OAAO,CAAC,EAAE,KAAK,QAAQ,EAAE,GAAG;4BAAE,GAAG,IAAI;4BAAE,UAAU,KAAK,QAAQ,GAAG;wBAAS,IAAI;gBAExF,OAAO;oBACJ,MAAM;wBACF,SAAS;wBACT,OAAO;wBACP,aAAa,CAAC,uBAAuB,EAAE,QAAQ,IAAI,CAAC,OAAO,EAAE,QAAQ,KAAK,CAAC,iBAAiB,CAAC;oBACjG;oBACA,OAAO;gBACV;YACH;YACA,OAAO;mBAAI;gBAAU;oBAAE;oBAAS,UAAU;gBAAS;aAAE;QACvD;IACF;IAEA,MAAM,uBAAuB,CAAC,WAAmB;QAC/C,QAAQ,CAAC,WACP,SAAS,GAAG,CAAC,CAAC,OACZ,KAAK,OAAO,CAAC,EAAE,KAAK,YAAY;oBAAE,GAAG,IAAI;oBAAE,UAAU;gBAAS,IAAI;IAGxE;IAEA,MAAM,mBAAmB,CAAC;QACxB,QAAQ,CAAC,WAAa,SAAS,MAAM,CAAC,CAAC,OAAS,KAAK,OAAO,CAAC,EAAE,KAAK;IACtE;IAEA,MAAM,oBAAoB,CAAC;QACzB,IAAI,MAAM,GAAG,KAAK,SAAS;YACzB,MAAM,UAAU,MAAM,aAAa,CAAC,KAAK;YACzC,IAAI,CAAC,UAAU;YAEf,IAAI;YACJ,IAAI,gBAAgB;YAEpB,KAAK,MAAM,KAAK,SAAU;gBACxB,IAAI,EAAE,WAAW,IAAI,EAAE,WAAW,KAAK,SAAS;oBAC9C,eAAe;oBACf,gBAAgB;oBAChB;gBACF;gBACA,IAAI,EAAE,WAAW,IAAI,EAAE,WAAW,KAAK,SAAS;oBAC9C,eAAe;oBACf,gBAAgB,EAAE,QAAQ;oBAC1B;gBACF;gBACA,IAAI,EAAE,WAAW,IAAI,EAAE,WAAW,KAAK,SAAS;oBAC9C,eAAe;oBACf,gBAAgB,EAAE,QAAQ;oBAC1B;gBACF;YACF;YAEA,IAAI,cAAc;gBAChB,gBAAgB,cAAc;gBAC9B,MAAM;oBACF,OAAO;oBACP,aAAa,GAAG,aAAa,IAAI,CAAC,GAAG,EAAE,cAAc,6BAA6B,CAAC;gBACvF;YACF,OAAO;gBACL,MAAM;oBACF,SAAS;oBACT,OAAO;oBACP,aAAa,CAAC,+BAA+B,EAAE,SAAS;gBAC5D;YACF;YACA,MAAM,aAAa,CAAC,KAAK,GAAG;QAC9B;IACF;IAEA,MAAM,iBAAiB,IAAA,oNAAW,EAAC;QACjC,QAAQ,EAAE;QACV,YAAY;QACZ,MAAM;YACF,OAAO;YACP,aAAa;QACjB;IACF,GAAG;QAAC;KAAM;IAGV,MAAM,iBAAiB,OAAO;QAC5B,IAAI,KAAK,MAAM,KAAK,KAAK,CAAC,aAAa,CAAC,MAAM;QAE9C,MAAM,QAAQ,IAAA,+KAAU,EAAC;QAEzB,sBAAsB;QACtB,KAAK,OAAO,CAAC,CAAA;YACX,MAAM,aAAa,IAAA,wKAAG,EAAC,WAAW,YAAY,SAAS,OAAO,CAAC,EAAE;YACjE,MAAM,WAAW,SAAS,OAAO,CAAC,KAAK,GAAG,SAAS,QAAQ;YAC3D,MAAM,MAAM,CAAC,YAAY;gBAAE,OAAO;YAAS;QAC7C;QAEA,MAAM,SAAS,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI;QACnC,MAAM,WAAW,IAAI;QAErB,MAAM,UAA4B;YAChC,MAAM,SAAS,WAAW;YAC1B,OAAO,YAAY,KAAK;YACxB,cAAc;YACd,OAAO,KAAK,GAAG,CAAC,CAAA,OAAQ,CAAC;oBACvB,WAAW,KAAK,OAAO,CAAC,EAAE;oBAC1B,aAAa,KAAK,OAAO,CAAC,IAAI;oBAC9B,UAAU,KAAK,QAAQ;oBACvB,OAAO,KAAK,OAAO,CAAC,KAAK;gBAC3B,CAAC;YACD,eAAe,YAAY,aAAa;YACxC,QAAQ;YACR,eAAe,KAAK,GAAG;YACvB,iBAAiB,KAAK,WAAW,IAAI,KAAK,KAAK,IAAI;YACnD,YAAY,YAAY,UAAU;YAClC,QAAQ,YAAY,MAAM;QAC5B;QAEA,MAAM,UAAU,IAAA,wKAAG,EAAC,IAAA,+KAAU,EAAC,WAAW;QAC1C,MAAM,GAAG,CAAC,SAAS;QAEnB,IAAI;YACA,MAAM,MAAM,MAAM;YAClB,YAAY;gBACR,GAAG,WAAW;gBACd,QAAQ,QAAQ,EAAE;gBAClB,MAAM;YACV;QACJ,EAAE,OAAM,GAAG;YACP,QAAQ,KAAK,CAAC,oBAAoB;YAClC,MAAM,kBAAkB,IAAI,qJAAwB,CAAC;gBACjD,MAAM;gBACN,WAAW;YACf;YACA,mJAAY,CAAC,IAAI,CAAC,oBAAoB;YACtC,MAAM;gBACF,SAAS;gBACT,OAAO;gBACP,aAAa;YACjB;QACJ;IACF;IAEA,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,UAAU;QAEf,MAAM,mBAAmB;YACvB,IAAI;gBACF;YACF,SAAU;gBACR,OAAO,mBAAmB,CAAC,cAAc;YAC3C;QACF;QAEA,mFAAmF;QACnF,OAAO,gBAAgB,CAAC,cAAc;QAEtC,iGAAiG;QACjG,OAAO,KAAK;QACZ,MAAM,WAAW,WAAW;YAC1B,0DAA0D;YAC1D,IAAI;gBACF;YACF,EAAE,OAAO,GAAG;YACV,SAAS;YACX;YACA,OAAO,mBAAmB,CAAC,cAAc;QAC3C,GAAG;QAEH,OAAO;YACL,aAAa;YACb,OAAO,mBAAmB,CAAC,cAAc;QAC3C;IACF,GAAG;QAAC;QAAU;KAAe;IAG7B,qBACE;;0BACE,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,+IAAU;wBAAC,OAAM;kCAChB,cAAA,8OAAC;4BAAI,WAAU;;8CACX,8OAAC,0IAAK;oCACJ,MAAK;oCACL,aAAY;oCACZ,WAAW;oCACX,WAAU;;;;;;8CAEZ,8OAAC;oCAAK,WAAU;8CACd,cAAA,8OAAC,mNAAO;wCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;kCAI3B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,wJAAU;gCAAC,WAAU;;oCACnB,iCACG,8OAAC;wCAAI,WAAU;kDACX,cAAA,8OAAC,4NAAO;4CAAC,WAAU;;;;;;;;;;;oCAG1B,CAAC,mBAAmB,0BACnB,8OAAC;wCAAI,WAAU;kDACZ,SAAS,GAAG,CAAC,CAAC,wBACb,8OAAC,2JAAW;gDAAkB,SAAS;gDAAS,aAAa,IAAM,gBAAgB,SAAS;+CAA1E,QAAQ,EAAE;;;;;;;;;;;;;;;;0CAKpC,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,mJAAO;oCACN,OAAO;oCACP,kBAAkB;oCAClB,cAAc;oCACd,YAAY;;;;;;;;;;;;;;;;;;;;;;;YAKnB,0BACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,+IAAO;oBAAC,KAAK;oBAAY,aAAa;;;;;;;;;;;;;AAKjD","debugId":null}}]
}